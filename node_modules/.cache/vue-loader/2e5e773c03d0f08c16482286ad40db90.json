{"remainingRequest":"/home/views/aquaman_view/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/views/aquaman_view/src/views/web-vul/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/views/aquaman_view/src/views/web-vul/index.vue","mtime":1604564429136},{"path":"/home/views/aquaman_view/node_modules/cache-loader/dist/cjs.js","mtime":1601261325203},{"path":"/home/views/aquaman_view/node_modules/babel-loader/lib/index.js","mtime":1601261365222},{"path":"/home/views/aquaman_view/node_modules/cache-loader/dist/cjs.js","mtime":1601261325203},{"path":"/home/views/aquaman_view/node_modules/vue-loader/lib/index.js","mtime":1601261366062}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IERldGVjdExpc3QsIERvd25sb2FkUmVwb3J0LCBEZXRlY3RJbmZvIH0gZnJvbSAiQC9hcGkvd2ViX3Z1bCIKaW1wb3J0IHdhdmVzIGZyb20gIkAvZGlyZWN0aXZlL3dhdmVzIjsgLy8gd2F2ZXMgZGlyZWN0aXZlCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsgLy8gc2Vjb25kYXJ5IHBhY2thZ2UgYmFzZWQgb24gZWwtcGFnaW5hdGlvbgoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYXV0aHRlc3Rlcl9kZXRlY3RfbGlzdCIsCiAgY29tcG9uZW50czogeyBQYWdpbmF0aW9uIH0sCiAgZGlyZWN0aXZlczogeyB3YXZlcyB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZUtleTogMCwKICAgICAgbGluazogJ2h0dHA6Ly8xNzIuMzEuNTAuMTc3L3N0YXRpYy9hcXVhbWFuL2Rvd25sb2FkLycsIC8vIC9zdGF0aWMvYXF1YW1hbi9kb3dubG9hZC8yMDEwMDlfOS5odG1sCiAgICAgIGxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBzY2FuX2lkOiAiNmM4OGQ1OTktYzM1Ni00NjdjLWI2ZGYtYWRjNWQzNzhlODA0IiwKICAgICAgICAgIHN0YXJ0X2RhdGU6ICIyMDE5LTEwLTMwIDEzOjM5OjA0IiwKICAgICAgICAgIGFkZHJlc3M6ICIxOTIuMTY4LjEuMTQxIiwKICAgICAgICAgIGRlc2M6ICIiLAogICAgICAgICAgcHJvZmlsZV9uYW1lOiAiRnVsbCBTY2FuIiwKICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICAgICAgdGFyZ2V0X2lkOiAiNmNmZGEzZmEtZDZmMS00YzY1LThmNWYtY2Q1MjJiNjkyNjRmIiwKICAgICAgICAgIHZ1bF9oaWdoOiAwLAogICAgICAgICAgdnVsX21lZGl1bTogMCwKICAgICAgICAgIHZ1bF9sb3c6IDAsCiAgICAgICAgICB2dWxfaW5mbzogMCwKICAgICAgICB9CiAgICAgIF0sCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGRpYWxvZ0RhdGE6IHt9LAogICAgICBkb3dubG9hZERpYWxvZzoge30sCiAgICAgIHVwZGxkaWFsb2c6IGZhbHNlLCAKICAgICAgdG90YWw6IDAsCiAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSwKICAgICAgbGlzdFF1ZXJ5OiB7cGFnZV9ubzogMSwgcGFnZV9zaXplOiAyMCwgaW5mbzogIiJ9LCAvL+mhteeggeOAgeadoeaVsOOAgeafpeivouWtl+autQogICAgICByZXBvcnREaWFsb2c6IHt9LAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxpc3RRdWVyeS5pbmZvID0gdGhpcy4kcm91dGUucXVlcnkudGFza19pZAogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bliJfooagKICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubGlzdCA9IFtdCiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwogICAgICBEZXRlY3RMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDsKICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOyB9LCAxLjUgKiAxMDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YWz6ZSu6K+N5p+l6K+iCiAgICBoYW5kbGVGaWx0ZXIoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2Vfbm8gPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDliKDpmaTorrDlvZUKICAgIGhhbmRsZURlbGV0ZShyb3csIGluZGV4KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhuWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocm93LCBpbmRleCkKICAgICAgICAvLyBsZXQgZGVsZXRlUXVlcnkgPSB7IGlkOiByb3cuaWQgfTsKICAgICAgICAvLyBzZXJ2aWNlRGVsZXRlKGRlbGV0ZVF1ZXJ5KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIC8vICAgdGhpcy4kbm90aWZ5KHsgdGl0bGU6ICJTdWNjZXNzIiwgbWVzc2FnZTogIkRlbGV0ZSBTdWNjZXNzZnVsbHkiICsgcmVzcG9uc2UuZGF0YS5lcnJtc2csIHR5cGU6ICJzdWNjZXNzIiwgZHVyYXRpb246IDMwMDAsIH0pOwogICAgICAgIC8vICAgdGhpcy5saXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgLy8gfSk7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsIG1lc3NhZ2U6ICLmjqXlj6PmnKrlrp7njrAiLCB0eXBlOiAic3VjY2VzcyIsIGR1cmF0aW9uOiA1MDAwLAogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAiQ2FuY2VsIiwgbWVzc2FnZTogIkRlbGV0ZSBDYW5jZWwiLCB0eXBlOiAiaW5mbyIsIGR1cmF0aW9uOiA1MDAwLAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVEaWFsb2cocm93KXsKICAgICAgRGV0ZWN0SW5mbyh7c2Nhbl9pZDogcm93LnNjYW5faWR9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZGlhbG9nRGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG5vdGlmeSh7dGl0bGU6ICJGYWlsZWQiLCBtZXNzYWdlOiAiRmFpbGVkIEdldCBEZXRhaWwiLCB0eXBlOiAiZGFuZ2VyIiwgZHVyYXRpb246IDUwMDB9KTsKICAgICAgfSk7CiAgICB9LAogICAgb3BlbkZ1bGxTY3JlZW4ocm93KXsKICAgICAgICBjb25zdCBsb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7bG9jazogdHJ1ZSwgdGV4dDogJ0xvYWRpbmcnLCBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KSd9KTsKICAgICAgICBsZXQgcXVlcnkgPSB7J3NjYW5faWQnOiByb3cuc2Nhbl9pZH0gCiAgICAgICAgLy8g6LCDQVBJ5o6l5Y+jCiAgICAgICAgRG93bmxvYWRSZXBvcnQocXVlcnkpLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgICAgICB0aGlzLnJlcG9ydERpYWxvZyA9IHsKICAgICAgICAgICAgICAgIGh0bWxfdXJsOiB0aGlzLmxpbmsgKyByZXNwb25zZS5kYXRhLmh0bWxfdXJsLAogICAgICAgICAgICAgICAgcGRmX3VybDogdGhpcy5saW5rICsgcmVzcG9uc2UuZGF0YS5wZGZfdXJsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5yZXBvcnREaWFsb2cpCiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKQogICAgICAgICAgICB0aGlzLnVwZGxkaWFsb2cgPSB0cnVlCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG5vdGlmeSh7IHRpdGxlOiAiVW5rbm93IEVycm9yIiwgbWVzc2FnZTogIkNhbid0IFJlY2VpdmUgRGF0YSBGcm9tIFNlcnZlci4iLCB0eXBlOiAiZGFuZ2VyIiwgZHVyYXRpb246IDUwMDAsfSkKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgIH0pCiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/web-vul","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.info\" placeholder=\"TaskID\" style=\"width: 200px;\" class=\"filter-item\" @keyup.enter.native=\"handleFilter\" />\n      <el-button v-waves class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">Search</el-button>\n    </div>\n    <!--弹出组件-->\n    <el-dialog title=\"检出详情\" :visible.sync=\"dialog\" width=\"60%\">\n      <pre overflow=\"hidden\">{{dialogData}}</pre>\n    </el-dialog>\n\n    <el-dialog title=\"导出报告\" :visible.sync=\"updldialog\" width=\"30%\">\n      <el-form ref=\"dataForm\" :model=\"reportDialog\" label-position=\"left\" label-width=\"120px\" size=\"mini\" style=\"width: 400px; margin-left:50px;\">\n          <el-form-item class=\"dl-panel\">\n              <el-link :href=reportDialog.html_url target=\"_blank\" icon=\"el-icon-link\" type=\"success\" class=\"dl-a\">HTML</el-link>\n              <el-link :href=reportDialog.pdf_url target=\"_blank\" type=\"primary\" class=\"dl-a\"><svg-icon icon-class=\"pdf\" /> PDF</el-link>\n          </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"updldialog = false\">关 闭</el-button>\n      </span>\n    </el-dialog>\n\n    <el-table :key=\"tableKey\" v-loading=\"listLoading\" element-loading-text=\"玩命加载中\" element-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.8)\"\n     :data=\"list\" border fit highlight-current-row style=\"width: 100%;\"  :default-sort = \"{prop: 'start_date', order: 'descending'}\">\n      <!-- <el-table-column label=\"ID\" prop=\"id\" align=\"center\" min-width=\"55px\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.scan_id }}</span>\n        </template>\n      </el-table-column> -->\n      <el-table-column label=\"目标\" min-width=\"40px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.address }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"扫描类型\" min-width=\"30px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.profile_name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"扫描状态\" min-width=\"30px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag v-if=\"row.status=='completed'\" effect=\"dark\" type=\"success\">\n            <i  class=\"el-icon-check\"  style=\"margin-left:2%\">{{ row.status }}</i>\n          </el-tag>\n          <el-tag v-else-if=\"row.status=='failed'\" effect=\"dark\" type=\"danger\" style=\"width:96px\">\n            <i  class=\"el-icon-warning\" style=\"margin-left:2%\" >{{ row.status }}</i>\n          </el-tag>\n          <el-tag v-else-if=\"row.status=='aborted'\" effect=\"dark\" type=\"danger\" style=\"width:96px\">\n            <i  class=\"el-icon-warning\" style=\"margin-left:2%\" >{{ row.status }}</i>\n          </el-tag>\n          <el-tag v-else>\n            <i  class=\"el-icon-loading\" style=\"margin-left:2%\" >处理中{{ row.status }}</i>\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"检测结果\" width=\"200px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag type=\"danger\" style=\"width: 40px\">{{row.vul_high}}</el-tag>\n          <el-tag type=\"warning\" style=\"width: 40px\">{{row.vul_medium}}</el-tag>\n          <el-tag type=\"\" style=\"width: 40px\">{{row.vul_low}}</el-tag>\n          <el-tag type=\"info\" style=\"width: 40px\">{{row.vul_info}}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"扫描日期\" min-width=\"35px\" align=\"center\" prop=\"start_date\" sortable>\n        <template slot-scope=\"{row}\">\n          <span>{{ row.start_date }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"详细报告\" min-width=\"30px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-button v-if=\"row.status==='completed'\" plain type=\"success\" size=\"mini\" class=\"operation-btn\" icon=\"el-icon-download\" @click=\"openFullScreen(row)\">导出报告</el-button>\n          <el-button v-else plain type=\"info\" size=\"mini\" class=\"operation-btn\" icon=\"el-icon-download\" disabled>导出报告</el-button>  \n        </template>\n      </el-table-column>\n      <el-table-column label=\"Operation\" align=\"center\" width=\"180\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"{row,$index}\">\n          <el-button type=\"primary\" size=\"mini\" class=\"operation-btn\" @click=\"handleDialog(row)\">详情</el-button>\n          <el-button type=\"danger\" size=\"mini\" @click=\"handleDelete(row,$index)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page_no\" :limit.sync=\"listQuery.page_size\" @pagination=\"getList\" />\n  </div>\n</template>\n\n<script>\nimport { DetectList, DownloadReport, DetectInfo } from \"@/api/web_vul\"\nimport waves from \"@/directive/waves\"; // waves directive\nimport Pagination from \"@/components/Pagination\"; // secondary package based on el-pagination\n\n\nexport default {\n  name: \"authtester_detect_list\",\n  components: { Pagination },\n  directives: { waves },\n  data() {\n    return {\n      tableKey: 0,\n      link: 'http://172.31.50.177/static/aquaman/download/', // /static/aquaman/download/201009_9.html\n      list: [\n        {\n          scan_id: \"6c88d599-c356-467c-b6df-adc5d378e804\",\n          start_date: \"2019-10-30 13:39:04\",\n          address: \"192.168.1.141\",\n          desc: \"\",\n          profile_name: \"Full Scan\",\n          status: \"success\",\n          target_id: \"6cfda3fa-d6f1-4c65-8f5f-cd522b69264f\",\n          vul_high: 0,\n          vul_medium: 0,\n          vul_low: 0,\n          vul_info: 0,\n        }\n      ],\n      dialog: false,\n      dialogData: {},\n      downloadDialog: {},\n      updldialog: false, \n      total: 0,\n      listLoading: false,\n      listQuery: {page_no: 1, page_size: 20, info: \"\"}, //页码、条数、查询字段\n      reportDialog: {},\n    };\n  },\n  created() {\n    this.listQuery.info = this.$route.query.task_id\n    this.getList();\n  },\n  methods: {\n    // 获取列表\n    getList() {\n      this.list = []\n      this.listLoading = true;\n      DetectList(this.listQuery).then((response) => {\n        this.list = response.data.list;\n        this.total = response.data.total;\n        setTimeout(() => { this.listLoading = false; }, 1.5 * 1000);\n      });\n    },\n    // 关键词查询\n    handleFilter() {\n      this.listQuery.page_no = 1;\n      this.getList();\n    },\n    // 删除记录\n    handleDelete(row, index) {\n      this.$confirm(\"此操作将删除该记录, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      }).then(() => {\n        console.log(row, index)\n        // let deleteQuery = { id: row.id };\n        // serviceDelete(deleteQuery).then((response) => {\n        //   this.$notify({ title: \"Success\", message: \"Delete Successfully\" + response.data.errmsg, type: \"success\", duration: 3000, });\n        //   this.list.splice(index, 1);\n        // });\n        this.$notify({\n          title: \"Success\", message: \"接口未实现\", type: \"success\", duration: 5000,\n        });\n      }).catch(() => {\n        this.$notify({\n          title: \"Cancel\", message: \"Delete Cancel\", type: \"info\", duration: 5000,\n        });\n      });\n    },\n    handleDialog(row){\n      DetectInfo({scan_id: row.scan_id}).then((response) => {\n        this.dialogData = response.data\n        this.dialog = true\n      }).catch(() => {\n        this.$notify({title: \"Failed\", message: \"Failed Get Detail\", type: \"danger\", duration: 5000});\n      });\n    },\n    openFullScreen(row){\n        const loading = this.$loading({lock: true, text: 'Loading', spinner: 'el-icon-loading', background: 'rgba(0, 0, 0, 0.7)'});\n        let query = {'scan_id': row.scan_id} \n        // 调API接口\n        DownloadReport(query).then((response)=>{\n            this.reportDialog = {\n                html_url: this.link + response.data.html_url,\n                pdf_url: this.link + response.data.pdf_url\n            }\n            console.log(this.reportDialog)\n            loading.close()\n            this.updldialog = true\n        }).catch(() => {\n        this.$notify({ title: \"Unknow Error\", message: \"Can't Receive Data From Server.\", type: \"danger\", duration: 5000,})\n            loading.close();\n        })\n    },\n  },\n};\n</script>\n\n<style>\n.operation-btn {\n  margin-right: 10px;\n}\n.dl-a{\n    display:inline-block; width:33%; margin-right: 10%;\n}\npre{\n    white-space: pre-wrap;\n    word-wrap: break-word;\n}\n</style>"]}]}