{"remainingRequest":"/home/views/opentest_view/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/views/opentest_view/src/views/chain/block.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/views/opentest_view/src/views/chain/block.vue","mtime":1597395315124},{"path":"/home/views/opentest_view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/views/opentest_view/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/views/opentest_view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/views/opentest_view/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoYWluQWRkQmxvY2ssIGJsb2NrRGV0YWlsLCBjaGFpblVwZGF0ZUJsb2NrIH0gZnJvbSAiQC9hcGkvY2hhaW4iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzRWRpdEl0ZW06IGZhbHNlLAogICAgICBpc0VkaXRQYWdlOiBmYWxzZSwgLy/mmK/liJvlu7rov5jmmK/kv67mlLnpobXpnaLvvJ8KICAgICAgc3VibWl0QnRuRGlzYWJsZWQ6IGZhbHNlLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICB0aXRsZTogIuWIm+W7uue7hOS7tiIsCiAgICAgIHRlbXA6IHsgaWQ6IDAsIGJsb2NrX2lkOiAwLCBhY3Rpb25fbmFtZTogIiIsIGV2ZW50X3R5cGU6IHVuZGVmaW5lZCwgc2VhcmNoX3R5cGU6IHVuZGVmaW5lZCwgdXJsOiAiIiwgZWxlbWVudF9pZDogIiIsIGVsZW1lbnRfdmFsdWU6ICIiLCB4cGF0aDogIiIsIHRpbWVvdXQ6IHVuZGVmaW5lZCwgYWxsb3dfZXJyOiAwIH0sCiAgICAgIGZvcm06IHsgYmxvY2tfbmFtZTogIiIsIHByaW9yaXR5OiAxLCBleHBlY3Q6ICIiLCB9LAogICAgICBsaXN0OiBbXSwKICAgICAgYmxvY2tfaWQ6IHVuZGVmaW5lZCwKICAgICAgY3VyTGlzdEl0ZW1JbmRleDogdW5kZWZpbmVkLC8v5b2T5YmN5L+u5pS555qE5YiX6KGo55qE5LiL5qCH5YC8CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkCiAgICBpZiAoaWQpIHsgLy/ngrnlh7vkv67mlLnpobXpnaLnmoTot7PovaxpZCB1cmnlj4LmlbAoP2lkPTY0KQogICAgICAvLyDlpoLmnpzmnIlpZCzmn6VEQui/m+ihjOi1i+WAvAogICAgICB0aGlzLnRpdGxlID0gIuabtOaWsOe7hOS7tumFjee9riIKICAgICAgdGhpcy5pc0VkaXRQYWdlID0gdHJ1ZQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUKICAgICAgdGhpcy5ibG9ja19pZCA9IE51bWJlcihpZCkKICAgICAgdGhpcy5nZXREZXRhaWwoaWQpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuRGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgdGhpcy5pc0VkaXRJdGVtID0gZmFsc2UKICAgIH0sCiAgICAvLyDmm7TmlrDnu4Tku7bphY3nva4KICAgIG9uVXBkYXRlKCkgewogICAgICBpZiAodGhpcy5mb3JtLmJsb2NrX25hbWUgPT0gIiIpIHsgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLnu4Tku7blkI3lv4XloasiLCB0eXBlOiAid2FybmluZyIgfSk7IHJldHVybiB9CiAgICAgIGlmICh0aGlzLmZvcm0ucHJpb3JpdHkgPCAxKSB7IHRoaXMuJG1lc3NhZ2UoeyBtZXNzYWdlOiAi6YeN6KaB5oCn5b+F6YCJIiwgdHlwZTogIndhcm5pbmciIH0pOyByZXR1cm4gfQogICAgICBpZiAodGhpcy5saXN0Lmxlbmd0aCA9PSAwKSB7IHRoaXMuJG1lc3NhZ2UoeyBtZXNzYWdlOiAi5Yqo5L2c5YiX6KGo5Li656m6IiwgdHlwZTogIndhcm5pbmciIH0pOyByZXR1cm4gfQogICAgICB0aGlzLnN1Ym1pdEJ0bkRpc2FibGVkID0gdHJ1ZQogICAgICAvLzEu57uE6KOF5pWw5o2uCiAgICAgIGxldCBwb3N0RGF0YSA9IHsgaWQ6IHRoaXMuYmxvY2tfaWQsIGJsb2NrX25hbWU6IHRoaXMuZm9ybS5ibG9ja19uYW1lLCBwcmlvcml0eTogdGhpcy5mb3JtLnByaW9yaXR5LCBleHBlY3Q6IHRoaXMuZm9ybS5leHBlY3QsIGFjdGlvbl9jaGFpbjogdGhpcy5saXN0IH0KICAgICAgLy8yLuiwg0FQSeaOpeWPowogICAgICBjaGFpblVwZGF0ZUJsb2NrKHBvc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuc3VibWl0QnRuRGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmNsZWFyRm9ybURhdGEoKTsKICAgICAgICB0aGlzLiRub3RpZnkoeyB0aXRsZTogIlN1Y2Nlc3MiLCBtZXNzYWdlOiAi5pu05paw5oiQ5YqfIFtpZDoiICsgdGhpcy5ibG9ja19pZCArICJdIiArIHJlc3BvbnNlLmRhdGEuZXJybXNnLCB0eXBlOiAic3VjY2VzcyIsIGR1cmF0aW9uOiA1MDAwLCB9KTsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLnN1Ym1pdEJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsgdGl0bGU6ICJGYWlsZWQiLCBtZXNzYWdlOiAi5pu05paw5aSx6LSlIFtpZDoiICsgdGhpcy5ibG9ja19pZCArICJdIiwgdHlwZTogImVycm9yIiwgZHVyYXRpb246IDUwMDAsIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+aPkOWPiuWIm+W7uue7hOS7tgogICAgb25TdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLmZvcm0uYmxvY2tfbmFtZSA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogIue7hOS7tuWQjeW/heWhqyIsIHR5cGU6ICJ3YXJuaW5nIiB9KTsgcmV0dXJuIH0KICAgICAgaWYgKHRoaXMuZm9ybS5wcmlvcml0eSA8IDEpIHsgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLph43opoHmgKflv4XpgIkiLCB0eXBlOiAid2FybmluZyIgfSk7IHJldHVybiB9CiAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID09IDApIHsgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLliqjkvZzliJfooajkuLrnqboiLCB0eXBlOiAid2FybmluZyIgfSk7IHJldHVybiB9CiAgICAgIHRoaXMuc3VibWl0QnRuRGlzYWJsZWQgPSB0cnVlCiAgICAgIC8vMS7nu4Too4XmlbDmja4KICAgICAgbGV0IHBvc3REYXRhID0geyBibG9ja19uYW1lOiB0aGlzLmZvcm0uYmxvY2tfbmFtZSwgcHJpb3JpdHk6IHRoaXMuZm9ybS5wcmlvcml0eSwgZXhwZWN0OiB0aGlzLmZvcm0uZXhwZWN0LCBhY3Rpb25fY2hhaW46IHRoaXMubGlzdCB9CiAgICAgIC8vMi7osINBUEnmjqXlj6MKICAgICAgY2hhaW5BZGRCbG9jayhwb3N0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnN1Ym1pdEJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5jbGVhckZvcm1EYXRhKCk7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsgdGl0bGU6ICJTdWNjZXNzIiwgbWVzc2FnZTogIua3u+WKoOaIkOWKnyIgKyByZXNwb25zZS5kYXRhLmVycm1zZywgdHlwZTogInN1Y2Nlc3MiLCBkdXJhdGlvbjogNTAwMCwgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLnN1Ym1pdEJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbENvbmZpcm0oKSB7CiAgICAgIHRoaXMuY2xlYXJUZW1wRGF0YSgpCiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgIH0sCiAgICBvbkNvbmZpcm0oc2lnbikgeyAvL+W8ueWHuuahhuaPkOS6pAogICAgICBsZXQgcmVzdWx0ID0geyBpZDogMCwgYmxvY2tfaWQ6IDAsIGFjdGlvbl9uYW1lOiAiIiwgZXZlbnRfdHlwZTogdW5kZWZpbmVkLCBzZWFyY2hfdHlwZTogdW5kZWZpbmVkLCB1cmw6ICIiLCBlbGVtZW50X2lkOiAiIiwgZWxlbWVudF92YWx1ZTogIiIsIHhwYXRoOiAiIiwgdGltZW91dDogdW5kZWZpbmVkLCBhbGxvd19lcnI6IDAsIHRpbWVzdGFtcDogdW5kZWZpbmVkIH0KICAgICAgcmVzdWx0LmFjdGlvbl9uYW1lID0gdGhpcy50ZW1wLmFjdGlvbl9uYW1lCiAgICAgIHJlc3VsdC5ldmVudF90eXBlID0gdGhpcy50ZW1wLmV2ZW50X3R5cGUKICAgICAgaWYgKHJlc3VsdC5hY3Rpb25fbmFtZSA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKCLliqjkvZzlkI3lv4XloasiKTsgcmV0dXJuIH0KICAgICAgaWYgKCFyZXN1bHQuZXZlbnRfdHlwZSkgeyB0aGlzLiRtZXNzYWdlKCLliqjkvZzlv4XpgIkiKTsgcmV0dXJuIH0KICAgICAgY29uc29sZS5sb2coIj09PT4iICsgdGhpcy50ZW1wLmV2ZW50X3R5cGUpCgogICAgICAvLzEu5Yik5pat5LqL5Lu2CiAgICAgIC8vMS4xIOmhtemdouWIh+aNoizlj6rkv53nlZl1cmwKICAgICAgaWYgKHJlc3VsdC5ldmVudF90eXBlID09IDEpIHsKICAgICAgICBpZiAodGhpcy50ZW1wLnVybCA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKCJVUkzlv4XloasiKTsgcmV0dXJuIH0KICAgICAgICByZXN1bHQudXJsID0gdGhpcy50ZW1wLnVybAogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdC5zZWFyY2hfdHlwZSA9IHRoaXMudGVtcC5zZWFyY2hfdHlwZQogICAgICAgIGlmICghcmVzdWx0LnNlYXJjaF90eXBlKSB7IHRoaXMuJG1lc3NhZ2UoIuWFg+e0oOajgOe0ouW/hemAiSIpOyByZXR1cm4gfQogICAgICB9CiAgICAgIC8vMS4y6L6T5YWl5LqL5Lu2LOWIpOaWreWFg+e0oOajgOe0ouaWueW8j1tieWlkfHhwYXRoXQogICAgICBpZiAocmVzdWx0LmV2ZW50X3R5cGUgPT0gMikgewogICAgICAgIGlmIChyZXN1bHQuc2VhcmNoX3R5cGUgPT0gMSkgeyAvL0J5SUQs5L+d55WZaWTlkox2YWx1ZQogICAgICAgICAgcmVzdWx0LmVsZW1lbnRfaWQgPSB0aGlzLnRlbXAuZWxlbWVudF9pZAogICAgICAgICAgcmVzdWx0LmVsZW1lbnRfdmFsdWUgPSB0aGlzLnRlbXAuZWxlbWVudF92YWx1ZQogICAgICAgICAgaWYgKHJlc3VsdC5lbGVtZW50X2lkID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoIuWxnuaAp0lE5b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgICBpZiAocmVzdWx0LmVsZW1lbnRfdmFsdWUgPT0gIiIpIHsgdGhpcy4kbWVzc2FnZSgi6L6T5YWl5YC85b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgfSBlbHNlIHsgLy/kv53nlZl4cGF0aAogICAgICAgICAgcmVzdWx0LnhwYXRoID0gdGhpcy50ZW1wLnhwYXRoCiAgICAgICAgICBpZiAocmVzdWx0LnhwYXRoID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoIlhQYXRo5b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vMS4zIOeCueWHu+S6i+S7tizlj6rkv53nlZlYUGF0aOaIlklE5Y2z5Y+vCiAgICAgIGlmIChyZXN1bHQuZXZlbnRfdHlwZSA9PSAzKSB7CiAgICAgICAgaWYgKHJlc3VsdC5zZWFyY2hfdHlwZSA9PSAxKSB7IC8vQnlJRCzkv53nlZlpZAogICAgICAgICAgcmVzdWx0LmVsZW1lbnRfaWQgPSB0aGlzLnRlbXAuZWxlbWVudF9pZAogICAgICAgICAgaWYgKHJlc3VsdC5lbGVtZW50X2lkID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoIuWxnuaAp0lE5b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgfSBlbHNlIHsgLy/kv53nlZl4cGF0aAogICAgICAgICAgcmVzdWx0LnhwYXRoID0gdGhpcy50ZW1wLnhwYXRoCiAgICAgICAgICBpZiAocmVzdWx0LnhwYXRoID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoIlhQYXRo5b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vMS40IOebkeWQrOS6i+S7tu+8jOWPquS/neeVmWlkfHhwYXRo44CB5pyf5pyb5YC844CB6LaF5pe25pe26Ze044CB5Ye66ZSZ5Li655yfCiAgICAgIGlmIChyZXN1bHQuZXZlbnRfdHlwZSA9PSA0KSB7CiAgICAgICAgcmVzdWx0LnRpbWVvdXQgPSB0aGlzLnRlbXAudGltZW91dAogICAgICAgIHJlc3VsdC5hbGxvd19lcnIgPSB0aGlzLnRlbXAuYWxsb3dfZXJyCiAgICAgICAgcmVzdWx0LmVsZW1lbnRfdmFsdWUgPSB0aGlzLnRlbXAuZWxlbWVudF92YWx1ZQogICAgICAgIGlmIChyZXN1bHQuc2VhcmNoX3R5cGUgPT0gMSkgeyAvL0J5SUQs5L+d55WZaWQKICAgICAgICAgIHJlc3VsdC5lbGVtZW50X2lkID0gdGhpcy50ZW1wLmVsZW1lbnRfaWQKICAgICAgICAgIGlmIChyZXN1bHQuZWxlbWVudF9pZCA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKCLlsZ7mgKdJROW/heWhqyIpOyByZXR1cm4gfQogICAgICAgIH0gZWxzZSB7IC8v5L+d55WZeHBhdGgKICAgICAgICAgIHJlc3VsdC54cGF0aCA9IHRoaXMudGVtcC54cGF0aAogICAgICAgICAgaWYgKHJlc3VsdC54cGF0aCA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKCJYUGF0aOW/heWhqyIpOyByZXR1cm4gfQogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0LmVsZW1lbnRfdmFsdWUgPT0gIiIpIHsgdGhpcy4kbWVzc2FnZSgi5pyf5pyb5YC85b+F5aGrIik7IHJldHVybiB9CiAgICAgIH0KICAgICAgLy8xLjUg5oqT5Y+W6KGo5qC85pWw5o2uCiAgICAgIGlmIChyZXN1bHQuZXZlbnRfdHlwZSA9PSA1KSB7CiAgICAgICAgaWYgKHJlc3VsdC5zZWFyY2hfdHlwZSA9PSAxKSB7IC8vQnlJRCzkv53nlZlpZAogICAgICAgICAgcmVzdWx0LmVsZW1lbnRfaWQgPSB0aGlzLnRlbXAuZWxlbWVudF9pZAogICAgICAgICAgaWYgKHJlc3VsdC5lbGVtZW50X2lkID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoIuWxnuaAp0lE5b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgfSBlbHNlIHsgLy/kv53nlZl4cGF0aAogICAgICAgICAgcmVzdWx0LnhwYXRoID0gdGhpcy50ZW1wLnhwYXRoCiAgICAgICAgICBpZiAocmVzdWx0LnhwYXRoID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoIlhQYXRo5b+F5aGrIik7IHJldHVybiB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJlc3VsdC5pZCA9IHRoaXMudGVtcC5pZAogICAgICByZXN1bHQuYmxvY2tfaWQgPSB0aGlzLnRlbXAuYmxvY2tfaWQKICAgICAgcmVzdWx0LnNlYXJjaF90eXBlID0gdGhpcy50ZW1wLnNlYXJjaF90eXBlCiAgICAgIHJlc3VsdC51cmwgPSB0aGlzLnRlbXAudXJsCiAgICAgIHJlc3VsdC5lbGVtZW50X2lkID0gdGhpcy50ZW1wLmVsZW1lbnRfaWQKICAgICAgcmVzdWx0LmVsZW1lbnRfdmFsdWUgPSB0aGlzLnRlbXAuZWxlbWVudF92YWx1ZQogICAgICByZXN1bHQueHBhdGggPSB0aGlzLnRlbXAueHBhdGgKICAgICAgcmVzdWx0LnRpbWVvdXQgPSBOdW1iZXIodGhpcy50ZW1wLnRpbWVvdXQpCiAgICAgIHJlc3VsdC5hbGxvd19lcnIgPSB0aGlzLnRlbXAuYWxsb3dfZXJyCiAgICAgIHJlc3VsdC50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpICsgIiIKCiAgICAgIC8vKyDliKTmlq3mmK/mlrDlop7ov5jmmK/kv67mlLnmk43kvZwKICAgICAgaWYgKHNpZ24gPT0gMSkgey8vICAtIOS/ruaUuSAtPuaUuWxpc3RbaW5kZXhd55qE5YC8CiAgICAgICAgdGhpcy5saXN0W3RoaXMuY3VyTGlzdEl0ZW1JbmRleF0gPSByZXN1bHQKICAgICAgfSBlbHNlIHsvLyAgLSDmlrDlop4gLT7mjqjnu5nlhajlsYBsaXN05LiLCiAgICAgICAgdGhpcy5saXN0LnB1c2gocmVzdWx0KQogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgdGhpcy5jbGVhclRlbXBEYXRhKCkKICAgIH0sCiAgICBkZWxMaXN0SXRlbShpbmRleCkgewogICAgICB0aGlzLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDkv67mlLlhY3Rpb27vvIzmnKzlnLDkv67mlLlsaXN0W2luZGV4XQogICAgZWRpdExpc3RJdGVtKGluZGV4KSB7CiAgICAgIC8v5omT5byA5by55Ye65qGGCiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgICB0aGlzLmlzRWRpdEl0ZW0gPSB0cnVlCiAgICAgIHRoaXMuY3VyTGlzdEl0ZW1JbmRleCA9IGluZGV4CiAgICAgIC8v5a+55by55Ye65qGG6L+b6KGM6LWL5YC8CiAgICAgIGxldCBvYmogPSB0aGlzLmxpc3RbaW5kZXhdCiAgICAgIHRoaXMudGVtcCA9IG9iagogICAgfSwKICAgIC8vIOaPkOS6pOW8ueWHuuahhuWQjua4hemZpHRlbXDlvLnlh7rmoYbmlbDmja4KICAgIGNsZWFyVGVtcERhdGEoKSB7CiAgICAgIHRoaXMudGVtcCA9IHsgYWN0aW9uX25hbWU6ICIiLCBldmVudF90eXBlOiB1bmRlZmluZWQsIHNlYXJjaF90eXBlOiB1bmRlZmluZWQsIHVybDogIiIsIGVsZW1lbnRfaWQ6ICIiLCBlbGVtZW50X3ZhbHVlOiAiIiwgeHBhdGg6ICIiLCB0aW1lb3V0OiB1bmRlZmluZWQsIGFsbG93X2VycjogMCB9CiAgICB9LAogICAgLy8g5o+Q5Lqk5oiQ5Yqf5riF56m65b2T5YmN6aG16Z2i5pWw5o2uCiAgICBjbGVhckZvcm1EYXRhKCkgewogICAgICB0aGlzLmZvcm0gPSB7IGJsb2NrX25hbWU6ICIiLCBwcmlvcml0eTogMSwgZXhwZWN0OiAiIiwgfQogICAgICB0aGlzLmxpc3QgPSBbXTsKICAgIH0sCiAgICBnZXREZXRhaWwoaWQpIHsKICAgICAgbGV0IHF1ZXJ5ID0geyBpZDogaWQgfQogICAgICBibG9ja0RldGFpbChxdWVyeSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmFjdGlvbnMKICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhLmluZm8KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7IH0sIDEuNSAqIDEwMDApOwogICAgICB9KTsKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["block.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"block.vue","sourceRoot":"src/views/chain","sourcesContent":["<template>\n  <div class=\"mixin-components-container\">\n    <el-row>\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{title}}</span>\n        </div>\n        <div style=\"margin-bottom:50px;\">\n          <el-form ref=\"form\" :model=\"form\" label-width=\"140px\">\n            <el-form-item label=\"组件名\" class=\"is-required\">\n              <el-input v-model=\"form.block_name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"重要性\" class=\"is-required\">\n              <el-select v-model=\"form.priority\" placeholder=\"请选择\">\n                <el-option label=\"Low\" :value=\"1\"></el-option>\n                <el-option label=\"Nonal\" :value=\"2\"></el-option>\n                <el-option label=\"High\" :value=\"3\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"期望值\">\n              <el-input v-model=\"form.expect\" placeholder=\"指执行完该链后期望匹配到的值\" disabled></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-card class=\"box-card-in\">\n                <div slot=\"header\" class=\"clearfix\">\n                  <span class=\"dump-box\">动作链</span>\n                  <el-button style=\"float: right; margin-top: 3px;\" type=\"text\" @click=\"openDialog()\">添加动作</el-button>\n                </div>\n                <el-timeline>\n                  <el-timeline-item v-for=\"(activity, index) in list\" :key=\"index\" :color=\"'#0bbd87'\" :timestamp=\"activity.timestamp\">\n                    {{activity.action_name}}\n                    <el-button type=\"danger\" size=\"mini\" style=\"float: right; margin-top: 3px;\" @click=\"delListItem(index)\">删除</el-button>\n                    <el-button type=\"primary\" size=\"mini\" style=\"float: right; margin-right:3px; margin-top: 3px;\" @click=\"editListItem(index)\">修改</el-button>\n                  </el-timeline-item>\n                </el-timeline>\n              </el-card>\n            </el-form-item>\n            <el-form-item>\n              <el-button v-if=\"isEditPage\" type=\"danger\" :disabled=\"submitBtnDisabled\" @click=\"onUpdate()\">提交修改</el-button>\n              <el-button v-else type=\"primary\" :disabled=\"submitBtnDisabled\" @click=\"onSubmit(0)\">立即创建</el-button>\n              <!-- <el-button>取消</el-button> -->\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-card>\n    </el-row>\n    <!--弹出组件-->\n    <el-dialog title=\"动作\" :visible.sync=\"dialog\">\n      <el-form ref=\"dataForm\" :model=\"temp\" label-position=\"left\" label-width=\"120px\" style=\"width: 400px; margin-left:50px;\">\n        <el-form-item label=\"动作名\" class=\"is-required\" style=\"width:500px;\">\n          <el-input v-model=\"temp.action_name\" />\n        </el-form-item>\n        <el-form-item label=\"动作\" class=\"is-required\">\n          <el-select v-model=\"temp.event_type\" placeholder=\"请选择\">\n            <el-option label=\"进入/切换页面\" :value=\"1\"></el-option>\n            <el-option label=\"输入事件\" :value=\"2\"></el-option>\n            <el-option label=\"点击事件\" :value=\"3\"></el-option>\n            <el-option label=\"监听事件\" :value=\"4\"></el-option>\n            <el-option label=\"抓取表格数据\" :value=\"5\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"请输入URL\">\n          <el-input v-model=\"temp.url\" placeholder=\"/#/login\" style=\"width:500px;\" />\n        </el-form-item>\n        <el-form-item label=\"元素检索\">\n          <el-select v-model=\"temp.search_type\" clearable placeholder=\"请选择\">\n            <el-option label=\"属性ID\" :value=\"1\"></el-option>\n            <el-option label=\"XPath\" :value=\"2\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"属性ID\">\n          <el-input v-model=\"temp.element_id\" placeholder=\"username\" style=\"width:500px;\" />\n        </el-form-item>\n        <el-form-item label=\"Xpath\">\n          <el-input v-model=\"temp.xpath\" placeholder=\"//*/div/h1/text\" style=\"width:500px;\" />\n        </el-form-item>\n        <el-form-item label=\"输入值|期望值\">\n          <el-input v-model=\"temp.element_value\" placeholder=\"若是输入事件,请输入内容值;若是监听事件，请输入期望值\" style=\"width:500px;\" />\n        </el-form-item>\n        <el-form-item label=\"超时时间\">\n          <el-input v-model=\"temp.timeout\" type=\"number\" oninput=\"if(value.length > 3)value = value.slice(0, 3)\" placeholder=\"在指定时间内检索元素(单位: 秒)\" style=\"width:500px;\" />\n        </el-form-item>\n        <el-form-item label=\"出错为真\">\n          <el-switch v-model=\"temp.allow_err\" active-color=\"#13ce66\" :active-value=\"1\" :inactive-value=\"0\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelConfirm()\">Cancel</el-button>\n        <el-button v-if=\"isEditItem\" type=\"danger\" :disabled=\"submitBtnDisabled\" @click=\"onConfirm(1)\">确认修改</el-button>\n        <el-button v-else type=\"primary\" @click=\"onConfirm(0)\">Confirm</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { chainAddBlock, blockDetail, chainUpdateBlock } from \"@/api/chain\";\nexport default {\n  data() {\n    return {\n      isEditItem: false,\n      isEditPage: false, //是创建还是修改页面？\n      submitBtnDisabled: false,\n      dialog: false,\n      title: \"创建组件\",\n      temp: { id: 0, block_id: 0, action_name: \"\", event_type: undefined, search_type: undefined, url: \"\", element_id: \"\", element_value: \"\", xpath: \"\", timeout: undefined, allow_err: 0 },\n      form: { block_name: \"\", priority: 1, expect: \"\", },\n      list: [],\n      block_id: undefined,\n      curListItemIndex: undefined,//当前修改的列表的下标值\n    };\n  },\n  created() {\n    let id = this.$route.query.id\n    if (id) { //点击修改页面的跳转id uri参数(?id=64)\n      // 如果有id,查DB进行赋值\n      this.title = \"更新组件配置\"\n      this.isEditPage = true\n      this.isLoading = true\n      this.block_id = Number(id)\n      this.getDetail(id)\n    }\n  },\n  methods: {\n    openDialog() {\n      this.dialog = true\n      this.isEditItem = false\n    },\n    // 更新组件配置\n    onUpdate() {\n      if (this.form.block_name == \"\") { this.$message({ message: \"组件名必填\", type: \"warning\" }); return }\n      if (this.form.priority < 1) { this.$message({ message: \"重要性必选\", type: \"warning\" }); return }\n      if (this.list.length == 0) { this.$message({ message: \"动作列表为空\", type: \"warning\" }); return }\n      this.submitBtnDisabled = true\n      //1.组装数据\n      let postData = { id: this.block_id, block_name: this.form.block_name, priority: this.form.priority, expect: this.form.expect, action_chain: this.list }\n      //2.调API接口\n      chainUpdateBlock(postData).then((response) => {\n        this.submitBtnDisabled = false;\n        this.clearFormData();\n        this.$notify({ title: \"Success\", message: \"更新成功 [id:\" + this.block_id + \"]\" + response.data.errmsg, type: \"success\", duration: 5000, });\n        this.$router.go(-1)\n      }).catch(() => {\n        this.submitBtnDisabled = false;\n        this.$notify({ title: \"Failed\", message: \"更新失败 [id:\" + this.block_id + \"]\", type: \"error\", duration: 5000, });\n      });\n    },\n    //提及创建组件\n    onSubmit() {\n      if (this.form.block_name == \"\") { this.$message({ message: \"组件名必填\", type: \"warning\" }); return }\n      if (this.form.priority < 1) { this.$message({ message: \"重要性必选\", type: \"warning\" }); return }\n      if (this.list.length == 0) { this.$message({ message: \"动作列表为空\", type: \"warning\" }); return }\n      this.submitBtnDisabled = true\n      //1.组装数据\n      let postData = { block_name: this.form.block_name, priority: this.form.priority, expect: this.form.expect, action_chain: this.list }\n      //2.调API接口\n      chainAddBlock(postData).then((response) => {\n        this.submitBtnDisabled = false;\n        this.clearFormData();\n        this.$notify({ title: \"Success\", message: \"添加成功\" + response.data.errmsg, type: \"success\", duration: 5000, });\n      }).catch(() => {\n        this.submitBtnDisabled = false;\n      });\n    },\n    cancelConfirm() {\n      this.clearTempData()\n      this.dialog = false\n    },\n    onConfirm(sign) { //弹出框提交\n      let result = { id: 0, block_id: 0, action_name: \"\", event_type: undefined, search_type: undefined, url: \"\", element_id: \"\", element_value: \"\", xpath: \"\", timeout: undefined, allow_err: 0, timestamp: undefined }\n      result.action_name = this.temp.action_name\n      result.event_type = this.temp.event_type\n      if (result.action_name == \"\") { this.$message(\"动作名必填\"); return }\n      if (!result.event_type) { this.$message(\"动作必选\"); return }\n      console.log(\"===>\" + this.temp.event_type)\n\n      //1.判断事件\n      //1.1 页面切换,只保留url\n      if (result.event_type == 1) {\n        if (this.temp.url == \"\") { this.$message(\"URL必填\"); return }\n        result.url = this.temp.url\n      } else {\n        result.search_type = this.temp.search_type\n        if (!result.search_type) { this.$message(\"元素检索必选\"); return }\n      }\n      //1.2输入事件,判断元素检索方式[byid|xpath]\n      if (result.event_type == 2) {\n        if (result.search_type == 1) { //ByID,保留id和value\n          result.element_id = this.temp.element_id\n          result.element_value = this.temp.element_value\n          if (result.element_id == \"\") { this.$message(\"属性ID必填\"); return }\n          if (result.element_value == \"\") { this.$message(\"输入值必填\"); return }\n        } else { //保留xpath\n          result.xpath = this.temp.xpath\n          if (result.xpath == \"\") { this.$message(\"XPath必填\"); return }\n        }\n      }\n      //1.3 点击事件,只保留XPath或ID即可\n      if (result.event_type == 3) {\n        if (result.search_type == 1) { //ByID,保留id\n          result.element_id = this.temp.element_id\n          if (result.element_id == \"\") { this.$message(\"属性ID必填\"); return }\n        } else { //保留xpath\n          result.xpath = this.temp.xpath\n          if (result.xpath == \"\") { this.$message(\"XPath必填\"); return }\n        }\n      }\n      //1.4 监听事件，只保留id|xpath、期望值、超时时间、出错为真\n      if (result.event_type == 4) {\n        result.timeout = this.temp.timeout\n        result.allow_err = this.temp.allow_err\n        result.element_value = this.temp.element_value\n        if (result.search_type == 1) { //ByID,保留id\n          result.element_id = this.temp.element_id\n          if (result.element_id == \"\") { this.$message(\"属性ID必填\"); return }\n        } else { //保留xpath\n          result.xpath = this.temp.xpath\n          if (result.xpath == \"\") { this.$message(\"XPath必填\"); return }\n        }\n        if (result.element_value == \"\") { this.$message(\"期望值必填\"); return }\n      }\n      //1.5 抓取表格数据\n      if (result.event_type == 5) {\n        if (result.search_type == 1) { //ByID,保留id\n          result.element_id = this.temp.element_id\n          if (result.element_id == \"\") { this.$message(\"属性ID必填\"); return }\n        } else { //保留xpath\n          result.xpath = this.temp.xpath\n          if (result.xpath == \"\") { this.$message(\"XPath必填\"); return }\n        }\n      }\n      result.id = this.temp.id\n      result.block_id = this.temp.block_id\n      result.search_type = this.temp.search_type\n      result.url = this.temp.url\n      result.element_id = this.temp.element_id\n      result.element_value = this.temp.element_value\n      result.xpath = this.temp.xpath\n      result.timeout = Number(this.temp.timeout)\n      result.allow_err = this.temp.allow_err\n      result.timestamp = new Date() + \"\"\n\n      //+ 判断是新增还是修改操作\n      if (sign == 1) {//  - 修改 ->改list[index]的值\n        this.list[this.curListItemIndex] = result\n      } else {//  - 新增 ->推给全局list下\n        this.list.push(result)\n      }\n      this.dialog = false\n      this.clearTempData()\n    },\n    delListItem(index) {\n      this.list.splice(index, 1);\n    },\n    // 修改action，本地修改list[index]\n    editListItem(index) {\n      //打开弹出框\n      this.dialog = true\n      this.isEditItem = true\n      this.curListItemIndex = index\n      //对弹出框进行赋值\n      let obj = this.list[index]\n      this.temp = obj\n    },\n    // 提交弹出框后清除temp弹出框数据\n    clearTempData() {\n      this.temp = { action_name: \"\", event_type: undefined, search_type: undefined, url: \"\", element_id: \"\", element_value: \"\", xpath: \"\", timeout: undefined, allow_err: 0 }\n    },\n    // 提交成功清空当前页面数据\n    clearFormData() {\n      this.form = { block_name: \"\", priority: 1, expect: \"\", }\n      this.list = [];\n    },\n    getDetail(id) {\n      let query = { id: id }\n      blockDetail(query).then((response) => {\n        this.list = response.data.actions\n        this.form = response.data.info\n        console.log(this.list)\n        setTimeout(() => { this.isLoading = false; }, 1.5 * 1000);\n      });\n    },\n  }\n}\n</script>\n\n<style>\n.mixin-components-container {\n  background-color: #f0f2f5;\n  padding: 30px;\n  min-height: calc(100vh - 84px);\n}\n.text {\n  font-size: 14px;\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n.clearfix:after {\n  clear: both;\n}\n.box-card-in {\n  width: 60%;\n}\n.dump-box {\n  font-weight: 700;\n  color: #606266;\n}\n</style>"]}]}