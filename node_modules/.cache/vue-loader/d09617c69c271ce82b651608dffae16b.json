{"remainingRequest":"/home/views/aquaman_view/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/views/aquaman_view/src/views/poc-vul/task.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/views/aquaman_view/src/views/poc-vul/task.vue","mtime":1606458937732},{"path":"/home/views/aquaman_view/node_modules/cache-loader/dist/cjs.js","mtime":1601261325203},{"path":"/home/views/aquaman_view/node_modules/babel-loader/lib/index.js","mtime":1601261365222},{"path":"/home/views/aquaman_view/node_modules/cache-loader/dist/cjs.js","mtime":1601261325203},{"path":"/home/views/aquaman_view/node_modules/vue-loader/lib/index.js","mtime":1601261366062}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFRhc2tEZXRhaWwsIFBsdWdpbkxpc3QsIENyZWF0ZVRhc2ssIFB1dFRhc2sgfSBmcm9tICJAL2FwaS9wb2NfdnVsIjsKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0VkaXRJdGVtOiBmYWxzZSwKICAgICAgICAgICAgaXNFZGl0UGFnZTogZmFsc2UsIC8v5piv5Yib5bu66L+Y5piv5L+u5pS56aG16Z2i77yfCiAgICAgICAgICAgIHN1Ym1pdEJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgICAgICAgdGl0bGU6ICLliJvlu7rku7vliqEiLAogICAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICAgICAgdGFza19pZDogdW5kZWZpbmVkLAogICAgICAgICAgICBmb3JtOiB7dGFza19uYW1lOiAiIiwgcmVjdXJzaW9uOiAwLCBwbHVnaW5pZF9saXN0OltdLCB0YXJnZXRfbGlzdDoiIn0sIC8v56ys5LiJ5Liq5pivcGx1Z2luX2xpc3TkuIvmoIcs56ys5Zub5Liq6ZyA6KaB5YiH5YiGCiAgICAgICAgICAgIHBsdWdpbl9saXN0OiBbXSwgLy/mj5Lku7bliJfooagKICAgICAgICAgICAgdGVtcF9wbHVnaW46IHtpbmRleDogdW5kZWZpbmVkfSwgLy/pgInmi6nnmoTmj5Lku7YKICAgICAgICB9OwogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRQbHVnaW5zKCkKICAgICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZAogICAgICAgIGlmIChpZCkgeyAvL+eCueWHu+S/ruaUuemhtemdoueahOi3s+i9rGlkIHVyaeWPguaVsCg/aWQ9NjQpCiAgICAgICAgICAgIC8vIOWmguaenOaciWlkLOafpURC6L+b6KGM6LWL5YC8CiAgICAgICAgICAgIHRoaXMudGl0bGUgPSAi5pu05paw5Lu75YqhIgogICAgICAgICAgICB0aGlzLmlzRWRpdFBhZ2UgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICB0aGlzLnRhc2tfaWQgPSBpZAogICAgICAgICAgICB0aGlzLmdldERldGFpbChpZCkKICAgICAgICB9ZWxzZXsgLy/liJvlu7pQT0Pku7vliqEKICAgICAgICAgICAgCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvcGVuRGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgICAgICAgdGhpcy5pc0VkaXRJdGVtID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIC8vIOWFs+mXreWtkOmhtQogICAgICAgIGNsb3NlQ2hpbGRQYWdlKCkgewogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudGFnc1ZpZXcudmlzaXRlZFZpZXdzLnNwbGljZSh0aGlzLiRzdG9yZS5zdGF0ZS50YWdzVmlldy52aXNpdGVkVmlld3MuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5wYXRoID09PSB0aGlzLiRyb3V0ZS5wYXRoKSwgMSkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuJHN0b3JlLnN0YXRlLnRhZ3NWaWV3LnZpc2l0ZWRWaWV3c1t0aGlzLiRzdG9yZS5zdGF0ZS50YWdzVmlldy52aXNpdGVkVmlld3MubGVuZ3RoIC0gMV0ucGF0aCkKICAgICAgICB9LAogICAgICAgIC8vIOabtOaWsOe7hOS7tumFjee9rgogICAgICAgIG9uVXBkYXRlKCkgewogICAgICAgICAgICBpZiAodGhpcy5mb3JtLnRhc2tfbmFtZS50cmltKCkgPT0gIiIpIHsgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLku7vliqHlkI3lv4XloasiLCB0eXBlOiAid2FybmluZyIgfSk7IHJldHVybiB9CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0udGFyZ2V0X2xpc3QudHJpbSgpID09ICIiKSB7IHRoaXMuJG1lc3NhZ2UoeyBtZXNzYWdlOiAi55uu5qCH5YiX6KGo5Li656m6IiwgdHlwZTogIndhcm5pbmciIH0pOyByZXR1cm4gfSAgICAgCiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0ucGx1Z2luaWRfbGlzdC5sZW5ndGggPT0gMCkgeyB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogIuaPkuS7tuWIl+ihqOS4uuepuiIsIHR5cGU6ICJ3YXJuaW5nIiB9KTsgcmV0dXJuIH0KICAgICAgICAgICAgdGhpcy5zdWJtaXRCdG5EaXNhYmxlZCA9IHRydWUKICAgICAgICAgICAgLy8xLue7hOijheaVsOaNrgogICAgICAgICAgICBsZXQgdGFyZ2V0cyA9IHRoaXMuZm9ybS50YXJnZXRfbGlzdC5zcGxpdCgnXG4nKS5tYXAoZWwgPT4gZWwudHJpbSgpKS5maWx0ZXIoaXRlbSA9PiBpdGVtLnRyaW0oKSAhPSAnJykKICAgICAgICAgICAgbGV0IHBsdWdpbnMgPSBbXQogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5mb3JtLnBsdWdpbmlkX2xpc3QubGVuZ3RoOyBpKyspewogICAgICAgICAgICAgICAgcGx1Z2lucy5wdXNoKHRoaXMucGx1Z2luX2xpc3RbdGhpcy5mb3JtLnBsdWdpbmlkX2xpc3RbaV1dLl9pZCkKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgcG9zdERhdGEgPSB7IGlkOiB0aGlzLnRhc2tfaWQsIHRhc2tfbmFtZTogdGhpcy5mb3JtLnRhc2tfbmFtZSwgcmVjdXJzaW9uOiB0aGlzLmZvcm0ucmVjdXJzaW9uLCB0YXJnZXRfbGlzdDogdGFyZ2V0cywgcGx1Z2luczogcGx1Z2lucyB9CiAgICAgICAgICAgIC8vMi7osINBUEnmjqXlj6MKICAgICAgICAgICAgUHV0VGFzayhwb3N0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdEJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHt0aXRsZTogIlN1Y2Nlc3MiLCBtZXNzYWdlOiAiVXBkYXRlIFN1Y2Nlc3NmdWxseSIgKyByZXNwb25zZS5kYXRhLmVycm1zZywgdHlwZTogInN1Y2Nlc3MiLCBkdXJhdGlvbjogNTAwMH0pOwogICAgICAgICAgICAgIHRoaXMuY2xvc2VDaGlsZFBhZ2UoKQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zdWJtaXRCdG5EaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7dGl0bGU6ICJGYWlsZWQiLCBtZXNzYWdlOiAiRmFpbGVkIFVwZGF0ZSIsIHR5cGU6ICJlcnJvciIsIGR1cmF0aW9uOiA1MDAwfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgLy/mj5Dlj4rliJvlu7rnu4Tku7YKICAgICAgICBvblN1Ym1pdCgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKQogICAgICAgICAgICBpZiAodGhpcy5mb3JtLnRhc2tfbmFtZSA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogIuS7u+WKoeWQjeW/heWhqyIsIHR5cGU6ICJ3YXJuaW5nIiB9KTsgcmV0dXJuIH0KICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS50YXJnZXRfbGlzdCA9PSAiIikgeyB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogIuebruagh+WIl+ihqOS4uuepuiIsIHR5cGU6ICJ3YXJuaW5nIiB9KTsgcmV0dXJuIH0gICAgIAogICAgICAgICAgICBpZiAodGhpcy5mb3JtLnBsdWdpbmlkX2xpc3QubGVuZ3RoID09IDApIHsgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLmj5Lku7bliJfooajkuLrnqboiLCB0eXBlOiAid2FybmluZyIgfSk7IHJldHVybiB9CiAgICAgICAgICAgIHRoaXMuc3VibWl0QnRuRGlzYWJsZWQgPSB0cnVlCiAgICAgICAgICAgIC8vMS7nu4Too4XmlbDmja4KICAgICAgICAgICAgbGV0IHRhcmdldHMgPSB0aGlzLmZvcm0udGFyZ2V0X2xpc3Quc3BsaXQoJ1xuJykubWFwKGVsID0+IGVsLnRyaW0oKSkuZmlsdGVyKGl0ZW0gPT4gaXRlbS50cmltKCkgIT0gJycpCiAgICAgICAgICAgIGxldCBwbHVnaW5zID0gW10KICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuZm9ybS5wbHVnaW5pZF9saXN0Lmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgIHBsdWdpbnMucHVzaCh0aGlzLnBsdWdpbl9saXN0W3RoaXMuZm9ybS5wbHVnaW5pZF9saXN0W2ldXS5faWQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHBvc3REYXRhID0geyB0YXNrX25hbWU6IHRoaXMuZm9ybS50YXNrX25hbWUsIHJlY3Vyc2lvbjogdGhpcy5mb3JtLnJlY3Vyc2lvbiwgdGFyZ2V0X2xpc3Q6IHRhcmdldHMsIHBsdWdpbmlkX2xpc3Q6IHBsdWdpbnMgfQogICAgICAgICAgICBjb25zb2xlLmxvZyhwb3N0RGF0YSkKICAgICAgICAgICAgLy8yLuiwg0FQSeaOpeWPowogICAgICAgICAgICBDcmVhdGVUYXNrKHBvc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRCdG5EaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsgdGl0bGU6ICJTdWNjZXNzIiwgbWVzc2FnZTogIua3u+WKoOaIkOWKnyIgKyByZXNwb25zZS5kYXRhLmVycm1zZywgdHlwZTogInN1Y2Nlc3MiLCBkdXJhdGlvbjogNTAwMCwgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSB7fQogICAgICAgICAgICAgICAgdGhpcy5jbG9zZUNoaWxkUGFnZSgpCiAgICAgICAgICAgIH0pLmNhdGNoKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRCdG5EaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsgdGl0bGU6ICJGYWlsZWQiLCBtZXNzYWdlOiAi5re75Yqg5aSx6LSlOiIgKyByZXNwb25zZS5lcnJtc2csIHR5cGU6ICJkYW5nZXIiLCBkdXJhdGlvbjogNTAwMCwgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgY2FuY2VsQ29uZmlybSgpIHsKICAgICAgICAgICAgdGhpcy50ZW1wX3BsdWdpbiA9IHtpbmRleDogdW5kZWZpbmVkfQogICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICAvL+aPkuS7tuW8ueWHuuahhuaPkOS6pAogICAgICAgIG9uQ29uZmlybSgpIHsKICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50ZW1wX3BsdWdpbi5pbmRleAogICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7IHRoaXMuJG1lc3NhZ2UoIuaPkuS7tuW/hemAiSIpOyByZXR1cm4gfQogICAgICAgICAgICAvLyDliKTmlq3mmK/lkKblt7Lnu4/lrZjlnKjkuoYKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5wbHVnaW5pZF9saXN0LmluZGV4T2YoaW5kZXgpPiAtMSl7IHRoaXMuJG1lc3NhZ2UoeyBtZXNzYWdlOiAi6K+l5o+S5Lu25bey57uP6KKr6YCJ5oupIiwgdHlwZTogIndhcm5pbmciIH0pOyByZXR1cm4gfQogICAgICAgICAgICB0aGlzLmZvcm0ucGx1Z2luaWRfbGlzdC5wdXNoKGluZGV4KQogICAgICAgICAgICB0aGlzLnRlbXBfcGx1Z2luID0ge2luZGV4OiB1bmRlZmluZWR9CiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIC8vIOWIoOmZpOaPkuS7tuWIl+ihqOS4reeahOaPkuS7tgogICAgICAgIGRlbExpc3RJdGVtKGluZGV4KSB7IHRoaXMuZm9ybS5wbHVnaW5pZF9saXN0LnNwbGljZShpbmRleCwgMSkgfSwKICAgICAgICAvLyArIOS/ruaUuSDojrflj5blvZPliY3ku7vliqHkv6Hmga8KICAgICAgICBnZXREZXRhaWwoaWQpIHsKICAgICAgICAgICAgVGFza0RldGFpbCh7dGFza19pZDogaWR9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHJlc3BvbnNlLmRhdGEudGFyZ2V0X2xpc3QKICAgICAgICAgICAgICAgIGxldCB0YXJnZXRfc3RyID0gIiIKICAgICAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPHRhcmdldC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRfc3RyID0gdGFyZ2V0X3N0ciArIHRhcmdldFtpXSArICdcbicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICAgICAgICAgICAgICB0YXNrX25hbWU6IHJlc3BvbnNlLmRhdGEudGFza19uYW1lLAogICAgICAgICAgICAgICAgICAgIHRhcmdldF9saXN0OiB0YXJnZXRfc3RyLAogICAgICAgICAgICAgICAgICAgIHBsdWdpbmlkX2xpc3Q6IHJlc3BvbnNlLmRhdGEucGx1Z2luaWRfbGlzdCwKICAgICAgICAgICAgICAgICAgICByZWN1cnNpb246IHJlc3BvbnNlLmRhdGEucmVjdXJzaW9uCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoUGx1Z2luKHJlc3BvbnNlLmRhdGEucGx1Z2luaWRfbGlzdCkKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOyB9LCAxLjUgKiAxMDAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvLyArIOS/ruaUuSBwbHVnaW5pZF9saXN05Yy56YWN5o+S5Lu26K+m5oOFCiAgICAgICAgbWF0Y2hQbHVnaW4oYXJyYXkpewogICAgICAgICAgICBsZXQgaW5kZXhfbGlzdCA9IFtdCiAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPHRoaXMucGx1Z2luX2xpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGo9MDtqPGFycmF5Lmxlbmd0aDtqKyspewogICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVtqXT09dGhpcy5wbHVnaW5fbGlzdFtpXS5faWQpewogICAgICAgICAgICAgICAgICAgICAgICBpbmRleF9saXN0LnB1c2goaSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5mb3JtLnBsdWdpbmlkX2xpc3QgPSBpbmRleF9saXN0CiAgICAgICAgfSwKICAgICAgICAvLyDojrflj5ZQb2Pmj5Lku7bliJfooagKICAgICAgICBnZXRQbHVnaW5zKCl7CiAgICAgICAgICAgIGxldCBxdWVyeSA9IHtwYWdlX25vOiAxLCBwYWdlX3NpemU6IDEwMCwgaW5mbzogIiJ9IC8v6aG156CB44CB5p2h5pWw44CB5p+l6K+i5a2X5q61CiAgICAgICAgICAgIFBsdWdpbkxpc3QocXVlcnkpLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5fbGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdAogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoe3RpdGxlOiAiRXJyb3IiLCBtZXNzYWdlOiAiRmFpbGVkIEdldCBQbHVnaW4gRGF0YSIsIHR5cGU6ICJkYW5nZXIiLCBkdXJhdGlvbjogNTAwMH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgIH0KfQo="},{"version":3,"sources":["task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"task.vue","sourceRoot":"src/views/poc-vul","sourcesContent":["<template>\n  <div class=\"mixin-components-container\">\n    <el-row>\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{title}}</span>\n        </div>\n        <div style=\"margin-bottom:50px;\">\n          <el-form ref=\"form\" :model=\"form\" label-width=\"140px\">\n            <el-form-item label=\"任务名\" class=\"is-required\">\n              <el-input v-if=\"isEditPage\" v-model=\"form.task_name\" disabled></el-input>\n              <el-input v-else v-model=\"form.task_name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"扫描周期\" class=\"is-required\">\n              <el-select v-model=\"form.recursion\" placeholder=\"请选择\">\n                <el-option label=\"一次\" :value=0></el-option>\n                <el-option label=\"每日\" :value=1></el-option>\n                <el-option label=\"每周\" :value=7></el-option>\n                <el-option label=\"每月\" :value=30></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"检测目标\">\n              <el-input v-model=\"form.target_list\" type=\"textarea\" :rows=\"4\" placeholder=\"http://example.com, 多条换行\" />\n            </el-form-item>\n            <el-form-item>\n              <el-card class=\"box-card-in\">\n                <div slot=\"header\" class=\"clearfix\">\n                  <span class=\"dump-box\">插件列表</span>\n                  <el-button style=\"float: right; margin-top: 3px;\" type=\"text\" @click=\"openDialog()\">添加插件</el-button>\n                </div>\n                <el-timeline>\n                  <el-timeline-item v-for=\"(item, index) in form.pluginid_list\" :key=\"index\" :color=\"'#0bbd87'\" :timestamp=\"plugin_list[item].plugin_date\">\n                    {{plugin_list[item].plugin_name}}\n                    <el-button type=\"danger\" size=\"mini\" style=\"float: right; margin-top: 3px;\" @click=\"delListItem(index)\">删除</el-button>\n                  </el-timeline-item>\n                </el-timeline>\n              </el-card>\n            </el-form-item>\n            <el-form-item>\n              <el-button v-if=\"isEditPage\" type=\"danger\" :disabled=\"submitBtnDisabled\" @click=\"onUpdate()\">提交修改</el-button>\n              <el-button v-else type=\"primary\" :disabled=\"submitBtnDisabled\" @click=\"onSubmit(0)\">立即创建</el-button>\n              <!-- <el-button>取消</el-button> -->\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-card>\n    </el-row>\n    <!--弹出组件-->\n    <el-dialog title=\"POC插件\" :visible.sync=\"dialog\">\n      <el-form ref=\"dataForm\" :model=\"temp_plugin\" label-position=\"left\" label-width=\"120px\" style=\"width: 400px; margin-left:50px;\">\n        <el-form-item label=\"选择插件\" class=\"is-required\">\n          <el-select v-model=\"temp_plugin.index\" filterable  placeholder=\"请选择\" style=\"width: 120%\">\n            <el-option v-for=\"(item, index) in plugin_list\" :key=\"index\" :label=\"item.plugin_name\" :value=\"index\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelConfirm()\">Cancel</el-button>\n        <el-button type=\"primary\" @click=\"onConfirm()\">Confirm</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { TaskDetail, PluginList, CreateTask, PutTask } from \"@/api/poc_vul\";\nexport default {\n    data() {\n        return {\n            isEditItem: false,\n            isEditPage: false, //是创建还是修改页面？\n            submitBtnDisabled: false,\n            dialog: false,\n            title: \"创建任务\",\n            list: [],\n            task_id: undefined,\n            form: {task_name: \"\", recursion: 0, pluginid_list:[], target_list:\"\"}, //第三个是plugin_list下标,第四个需要切分\n            plugin_list: [], //插件列表\n            temp_plugin: {index: undefined}, //选择的插件\n        };\n    },\n    created() {\n        this.getPlugins()\n        let id = this.$route.query.id\n        if (id) { //点击修改页面的跳转id uri参数(?id=64)\n            // 如果有id,查DB进行赋值\n            this.title = \"更新任务\"\n            this.isEditPage = true\n            this.isLoading = true\n            this.task_id = id\n            this.getDetail(id)\n        }else{ //创建POC任务\n            \n        }\n    },\n    methods: {\n        openDialog() {\n            this.dialog = true\n            this.isEditItem = false\n        },\n        // 关闭子页\n        closeChildPage() {\n          this.$router.go(-1)\n          this.$store.state.tagsView.visitedViews.splice(this.$store.state.tagsView.visitedViews.findIndex(item => item.path === this.$route.path), 1)\n          this.$router.push(this.$store.state.tagsView.visitedViews[this.$store.state.tagsView.visitedViews.length - 1].path)\n        },\n        // 更新组件配置\n        onUpdate() {\n            if (this.form.task_name.trim() == \"\") { this.$message({ message: \"任务名必填\", type: \"warning\" }); return }\n            if (this.form.target_list.trim() == \"\") { this.$message({ message: \"目标列表为空\", type: \"warning\" }); return }     \n            if (this.form.pluginid_list.length == 0) { this.$message({ message: \"插件列表为空\", type: \"warning\" }); return }\n            this.submitBtnDisabled = true\n            //1.组装数据\n            let targets = this.form.target_list.split('\\n').map(el => el.trim()).filter(item => item.trim() != '')\n            let plugins = []\n            for (let i=0; i<this.form.pluginid_list.length; i++){\n                plugins.push(this.plugin_list[this.form.pluginid_list[i]]._id)\n            }\n            let postData = { id: this.task_id, task_name: this.form.task_name, recursion: this.form.recursion, target_list: targets, plugins: plugins }\n            //2.调API接口\n            PutTask(postData).then((response) => {\n              this.submitBtnDisabled = false;\n              this.$notify({title: \"Success\", message: \"Update Successfully\" + response.data.errmsg, type: \"success\", duration: 5000});\n              this.closeChildPage()\n            }).catch(() => {\n              this.submitBtnDisabled = false;\n              this.$notify({title: \"Failed\", message: \"Failed Update\", type: \"error\", duration: 5000});\n            });\n        },\n        //提及创建组件\n        onSubmit() {\n            console.log(this.form)\n            if (this.form.task_name == \"\") { this.$message({ message: \"任务名必填\", type: \"warning\" }); return }\n            if (this.form.target_list == \"\") { this.$message({ message: \"目标列表为空\", type: \"warning\" }); return }     \n            if (this.form.pluginid_list.length == 0) { this.$message({ message: \"插件列表为空\", type: \"warning\" }); return }\n            this.submitBtnDisabled = true\n            //1.组装数据\n            let targets = this.form.target_list.split('\\n').map(el => el.trim()).filter(item => item.trim() != '')\n            let plugins = []\n            for (let i=0; i<this.form.pluginid_list.length; i++){\n                plugins.push(this.plugin_list[this.form.pluginid_list[i]]._id)\n            }\n            let postData = { task_name: this.form.task_name, recursion: this.form.recursion, target_list: targets, pluginid_list: plugins }\n            console.log(postData)\n            //2.调API接口\n            CreateTask(postData).then((response) => {\n                this.submitBtnDisabled = false;\n                this.$notify({ title: \"Success\", message: \"添加成功\" + response.data.errmsg, type: \"success\", duration: 5000, });\n                this.form = {}\n                this.closeChildPage()\n            }).catch((response) => {\n                this.submitBtnDisabled = false;\n                this.$notify({ title: \"Failed\", message: \"添加失败:\" + response.errmsg, type: \"danger\", duration: 5000, });\n            });\n        },\n        cancelConfirm() {\n            this.temp_plugin = {index: undefined}\n            this.dialog = false\n        },\n        //插件弹出框提交\n        onConfirm() {\n            let index = this.temp_plugin.index\n            if (index < 0) { this.$message(\"插件必选\"); return }\n            // 判断是否已经存在了\n            if (this.form.pluginid_list.indexOf(index)> -1){ this.$message({ message: \"该插件已经被选择\", type: \"warning\" }); return }\n            this.form.pluginid_list.push(index)\n            this.temp_plugin = {index: undefined}\n            this.dialog = false\n        },\n        // 删除插件列表中的插件\n        delListItem(index) { this.form.pluginid_list.splice(index, 1) },\n        // + 修改 获取当前任务信息\n        getDetail(id) {\n            TaskDetail({task_id: id}).then((response) => {\n                let target = response.data.target_list\n                let target_str = \"\"\n                for (let i=0;i<target.length;i++){\n                    target_str = target_str + target[i] + '\\n'\n                }\n                this.form = {\n                    task_name: response.data.task_name,\n                    target_list: target_str,\n                    pluginid_list: response.data.pluginid_list,\n                    recursion: response.data.recursion\n                }\n                this.matchPlugin(response.data.pluginid_list)\n                setTimeout(() => { this.isLoading = false; }, 1.5 * 1000);\n            });\n        },\n        // + 修改 pluginid_list匹配插件详情\n        matchPlugin(array){\n            let index_list = []\n            for (let i=0;i<this.plugin_list.length;i++){\n                for(let j=0;j<array.length;j++){\n                    if (array[j]==this.plugin_list[i]._id){\n                        index_list.push(i)\n                        break\n                    }\n                }\n            }\n            this.form.pluginid_list = index_list\n        },\n        // 获取Poc插件列表\n        getPlugins(){\n            let query = {page_no: 1, page_size: 100, info: \"\"} //页码、条数、查询字段\n            PluginList(query).then((response)=>{\n                this.plugin_list = response.data.list\n            }).catch(() => {\n                this.$notify({title: \"Error\", message: \"Failed Get Plugin Data\", type: \"danger\", duration: 5000})\n            })\n        },\n    }\n}\n</script>\n\n<style>\n.mixin-components-container {\n    background-color: #f0f2f5;\n    padding: 30px;\n    min-height: calc(100vh - 84px);\n}\n.text {\n    font-size: 14px;\n}\n.clearfix:before,\n.clearfix:after {\n    display: table;\n    content: \"\";\n}\n.clearfix:after {\n    clear: both;\n}\n.box-card-in {\n    width: 60%;\n}\n.dump-box {\n    font-weight: 700;\n    color: #606266;\n}\n</style>"]}]}